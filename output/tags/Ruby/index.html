<!DOCTYPE html><html lang="en"><head>
    <meta charset="utf-8">
    <title>A Developer's Notebook - </title>
    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/pure-min.css" integrity="sha384-oAOxQR6DkCoMliIh8yFnu25d7Eq/PHS21PClpwjOTeU2jRSq11vu66rf90/cZr47" crossorigin="anonymous">
    <link rel="stylesheet" href="../../assets/stylesheet.css">
    <link rel="stylesheet" href="../../assets/highlight.css">

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- you don't need to keep this, but it's cool for stats! -->
    <meta name="generator" content="Nanoc 4.11.9">
  </head>
  <body>
    <div id="layout">
      <div class="header">
        <h1>
          <a href="../../">A Developer's Notebook</a>
        </h1>
      </div>


      <div class="content">
        <nav class="pure-g">
          <div class="pure-u-2-3 links">
            <a href="../../index.html">Home</a> ·
            <a href="../../tags.html">Tags</a> ·
            <a href="../../years.html">Years</a> ·
            <a href="../../about.html">About</a>
          </div>

          <div class="pure-u-1-3">
            <div class="contact">
              <span>
                <a href="https://github.com/lbrito1" download="">
                  <img src="../../assets/icons/github.svg" alt="Github icon">
                  </a>
              </span>
              <span>
                <a href="https://www.linkedin.com/in/leonardo-mendes-brito/">
                <img src="../../assets/icons/linkedin.svg" alt="LinkedIn icon">
                </a>
              </span>
            </div>
          </div>
        </nav>
        
  <h1>Posts tagged "Ruby"</h1>

  <div class="pure-g">
  
    <div class="post-index pure-u-1-1">
      <h2><a href="../../2017/03/dont-obsess-over-code-dry.html">Don't obsess over code DRYness</a></h2>

      <article class="text">
          <p>Being clever is a good thing for a developer. Ingenuity allows us to write software that solves complex real-world problems. However, “clever” <em>code</em> is not always a good thing. In many cases — I dare say in <em>most</em> cases — it is a very bad thing. I consciously try to avoid writing code that might be seen as “clever”. The smart thing to do is trying hard not to be smart (yes, very <a href="http://literarydevices.net/war-is-peace/">1984</a>).</p>

<p>Developers tend to see themselves (quite indulgently) as smart people. Not many people understand what we do, and society sees a developer as a kind of modern wizard, writing unreadable magic spells in a small metal box. In reality, though, we are not half as smart as we think: for instance, if you are a developer, you are certainly familiar with the frustration of trying to understand some cryptic piece of code that seemed perfectly reasonable and straightforward when you wrote it a couple of months earlier.</p>


        <div class="post-tags">
          
        </div>

        <div class="pure-g post-footer">
          <div class="pure-u-1-2">
              <a class="read-more" href="../../2017/03/dont-obsess-over-code-dry.html">Continue reading ›</a>
          </div>
          <div class="pure-u-1-2 post-meta">
            <aside>Posted Mar 20, 2017</aside>

          </div>
        </div>
      </article>
    </div>
  
    <div class="post-index pure-u-1-1">
      <h2><a href="../../2017/09/improving-spec-speed-in-a-huge-old-Rails-app.html">Improving spec speed in a huge, old Rails app</a></h2>

      <article class="text">
          <p>We got a 6-year-old Rails app with ~370k LOC and a ~6k-test suite which took 24 minutes to complete. Not good! We took a few days off of the main project to see if we could make things better.</p>

<p>More often than not, test suites are the nasty underbelly of a Rails app. Size and age just aggravate the problem. Tests are seldom a high priority in any project, and speed might not be an issue at all in smaller apps where the whole test suite might take just a few seconds to complete. As the project grows and the CI takes increasingly longer to complete, spec speed suddenly becomes more of an issue.</p>

<p>“Small” and “new” are not exactly the case for a certain Rails project we’re working on here at Guava. We’re talking about a 6-year-old e-commerce portal with ~370k LOC, a couple million customers and a ~6k-test, 300-spec suite which took, on average, a whopping 24 minutes to complete in our CI. <em>Not good!</em> So we took a couple of days off the main project to see if we could make things better — or less worse.</p>


        <div class="post-tags">
          
        </div>

        <div class="pure-g post-footer">
          <div class="pure-u-1-2">
              <a class="read-more" href="../../2017/09/improving-spec-speed-in-a-huge-old-Rails-app.html">Continue reading ›</a>
          </div>
          <div class="pure-u-1-2 post-meta">
            <aside>Posted Sep 04, 2017</aside>

          </div>
        </div>
      </article>
    </div>
  
    <div class="post-index pure-u-1-1">
      <h2><a href="../../2015/09/ruby-dsl-metaprogramming-part-ii.html">Ruby DSL &amp; metaprogramming, part II</a></h2>

      <article class="text">
          <p>In the previous installment we built a simple text generator using some Ruby meta-programming tricks. It was still far from being our desired context-free grammar (CFG) generator, though, since it lacked many <a href="https://www.cs.rochester.edu/~nelson/courses/csc_173/grammars/cfg.html">CFG prerequisites</a>. Most flagrantly, we had no rule recursion and only one production (rule definition) per rule. Here’s the what a script that would use both features:</p>

<div class="highlight"><pre><code class="language-bash">dictionary
  noun <span class="s1">'dog'</span>, <span class="s1">'bus'</span>
  verb <span class="s1">'barked'</span>, <span class="s1">'parked'</span>
  preposition <span class="s1">'at'</span>

rule <span class="s1">'phrase'</span>
  opt <span class="s1">'The'</span>, noun, verb, preposition, <span class="s1">'a'</span>, noun
  opt <span class="s1">'Here goes some'</span>, phrase, <span class="s1">'recursion.'</span>
  opt <span class="s1">'Meet me'</span>, preposition, <span class="s1">'the station.'</span>

grammar phrase: 10</code></pre></div>

<p>The <code>dictionary</code> section is just as we left it. Let’s see what changed in the <code>rule</code> section.</p>


        <div class="post-tags">
          
        </div>

        <div class="pure-g post-footer">
          <div class="pure-u-1-2">
              <a class="read-more" href="../../2015/09/ruby-dsl-metaprogramming-part-ii.html">Continue reading ›</a>
          </div>
          <div class="pure-u-1-2 post-meta">
            <aside>Posted Sep 20, 2015</aside>

          </div>
        </div>
      </article>
    </div>
  
    <div class="post-index pure-u-1-1">
      <h2><a href="../../2015/09/ruby-dsl-metaprogramming-part-i.html">Ruby DSL &amp; metaprogramming, part I</a></h2>

      <article class="text">
          <p>I’ve been working with Ruby for nearly a year now, which means I’m starting to feel the urge to tell people how awesome the language is. One of the most interesting aspects of Ruby to me is <a href="https://en.wikipedia.org/wiki/Metaprogramming">metaprogramming</a>, which it seems to have quite a vocation for.</p>

<p>Since college I have a fondness for automata and formal languages theory. One of the topics I particularly like is text generation (if you haven’t already, check out the excellent <a href="http://pdos.csail.mit.edu/scigen/">SCIgen</a> and the <a href="http://dev.null.org/dadaengine/">Dada engine</a>), so I thought that building a Context-free grammar (CFG)-like text generator in Ruby would be a nice little exercise and an opportunity to use some of the language’s coolest features. Also I’ve implemented one of those using Java several years ago, and it was <em>a mess</em>, so I was curious as to how much of an improvement would Ruby offer.</p>

<p>Suppose the following script:</p>

<div class="highlight"><pre><code class="language-ruby"><span class="n">dictionary</span> <span class="s1">'noun'</span><span class="p">,</span> <span class="s1">'dog'</span><span class="p">,</span> <span class="s1">'bus'</span>
<span class="n">dictionary</span> <span class="s1">'verb'</span><span class="p">,</span> <span class="s1">'barked'</span><span class="p">,</span> <span class="s1">'parked'</span>
<span class="n">dictionary</span> <span class="s1">'preposition'</span><span class="p">,</span> <span class="s1">'at'</span>

<span class="n">rule</span> <span class="s1">'phrase'</span><span class="p">,</span> <span class="s1">'noun'</span><span class="p">,</span> <span class="s1">'verb'</span><span class="p">,</span> <span class="s1">'preposition'</span><span class="p">,</span> <span class="s1">'noun'</span>

<span class="n">codex</span> <span class="s1">'phrase'</span></code></pre></div>

<p>We’d like <code>dictionary</code> to store some words according to their classes, and <code>rule</code> to define a specific ordering of words. For now let’s not worry about <code>codex</code> (it’s just a collection of rules).</p>

<p>At this point the seasoned programmer is mentally sketching some kind of text parser. It’s an okay solution, but isn’t there something <em>nicer</em> we can do? Well, there is: <a href="https://en.wikipedia.org/wiki/Domain-specific_language">DSL</a>s! In fact, Ruby is quite an excellent tool to build a DSL, and many famed Ruby-powered applications such as Rspec (and <a href="http://www.leighhalliday.com/creating-ruby-dsl">many others</a>) define some kind of DSL.</p>


        <div class="post-tags">
          
        </div>

        <div class="pure-g post-footer">
          <div class="pure-u-1-2">
              <a class="read-more" href="../../2015/09/ruby-dsl-metaprogramming-part-i.html">Continue reading ›</a>
          </div>
          <div class="pure-u-1-2 post-meta">
            <aside>Posted Sep 11, 2015</aside>

          </div>
        </div>
      </article>
    </div>
  
    <div class="post-index pure-u-1-1">
      <h2><a href="../../2017/05/when-postgres-is-not-enough.html">When Postgres is not enough</a></h2>

      <article class="text">
          <p>What happens when your project’s RDBMS is just not enough to deal with unexpectedly huge amounts of data?</p>

<p>You could try to de-normalize some tables here and there to avoid unnecessary JOINs, create a few indexes, implement some kind of pagination or even pre-process the data into a more palatable format. However, if you did all that and it still was not enough, the “natural impulse” is to give up on the RDBMS altogether and just use Elasticsearch. Sounds like a no-brainer, right?</p>


        <div class="post-tags">
          
        </div>

        <div class="pure-g post-footer">
          <div class="pure-u-1-2">
              <a class="read-more" href="../../2017/05/when-postgres-is-not-enough.html">Continue reading ›</a>
          </div>
          <div class="pure-u-1-2 post-meta">
            <aside>Posted May 08, 2017</aside>

          </div>
        </div>
      </article>
    </div>
  
</div>


        <div class="footer">
          2020 Leonardo Brito
        </div>
      </div>

    </div>
  


</body></html>